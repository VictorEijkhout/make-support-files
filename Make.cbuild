# -*- makefile -*-
info ::
	@echo "================ cmake compile and install:"
	@echo "make build"
	@echo "    [ SUDO= blank or sudo ]"
.PHONY: build install
build :
	@source ${MAKEINCLUDES}/names.sh \
	 && export MODE=${MODE} && export INSTALLROOT=${INSTALLROOT} \
	 && setnames ${PACKAGEROOT} ${PACKAGE} ${PACKAGEVERSION} ${INSTALLEXT} \
	 && ( \
	    cd $$builddir \
	     && make --no-print-directory VERBOSE=1 \
	     && ${SUDO} make --no-print-directory install \
	    ) 2>&1 | tee install.log \
	 && ( cd $$scriptdir && make --no-print-directory varsmodule ) \
	 && echo && echo "Installation in: $$installdir" && echo
include ${MAKEINCLUDES}/Make.vars
install :
	@echo && echo ">>>> Error: no install rule, use build instead <<<<" && echo

info ::
	@echo "make public : install dir"
	@echo "    [ INSTALLEXT as for cmake configure ]"
.PHONY: public
public :
	@source ${MAKEINCLUDES}/names.sh \
	 && export MODE=${MODE} && export INSTALLROOT=${INSTALLROOT} \
	 && setnames ${PACKAGEROOT} ${PACKAGE} ${PACKAGEVERSION} ${INSTALLEXT} \
	 && echo "opening $$installdir" \
	 && ${SUDO} chmod -R g+rX,o+rX $$installdir
