# -*- makefile -*-
################################################################
####
#### Make include file for opening a directory to the world.
#### this file is included in Make.install Make.cbuild
####
################################################################

info ::
	@echo "make public : install dir"
	@echo "    [ PREFIXOVERRIDE=... for non-standard prefix ]"
.PHONY: public
public ::
	@source ${MAKEINCLUDES}/names.sh \
	 && export MODE=${MODE} \
	 && setdirlognames "${PACKAGEROOT}" "${PACKAGE}" "${PACKAGEVERSION}" "${INSTALLEXT}" \
	 \
	 && if [ ! -z "${PREFIXOVERRIDE}" ] ; then \
	        installdir=${PREFIXOVERRIDE} ; fi \
	 && requirenonzero homedir \
	 && requirenonzero installdir \
	 && echo "opening $$homedir , $$installdir" \
	 && ${SUDO} chmod    g+rX,o+rX $$homedir \
	 && ${SUDO} chmod -R g+rX,o+rX $$installdir
